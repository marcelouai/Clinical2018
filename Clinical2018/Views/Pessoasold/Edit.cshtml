@model Clinical2018.Models.Pessoa

@{
    ViewData["Title"] = "Edit";
}


<h2>Edit</h2>

<h4>Pessoa</h4>
<hr />

<div class="table table-condensed">

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentatikey" class="active"><a href="#Pessoa" aria-controls="Pessoa" role="tab" data-toggle="tab">Pessoa</a></li>
        <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">Profile</a></li>
        <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">Messages</a></li>
        <li role="presentation"><a href="#settings" aria-controls="settings" role="tab" data-toggle="tab">Settings</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="Pessoa">

            <form asp-action="Edit">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <input type="hidden" asp-for="PessoaID" />

                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group" id="Tpo_Pessoa:div">
                            <label asp-for="Tpo_Pessoa" class="control-label"></label>
                            <select asp-for="Tpo_Pessoa" asp-items="Html.GetEnumSelectList<TipoPessoa>()" class="form-control" id="Tpo_Pessoa" disabled></select>
                            <span asp-validation-for="Tpo_Pessoa" class="text-danger"></span>
                        </div>
                        @*</div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">*@
                        <div class="form-group ">
                            <label asp-for="Nome" class="control-label"></label>
                            <input asp-for="Nome" class="form-control " />
                            <span asp-validation-for="Nome" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group" title="PessoaJuridica">
                            <label asp-for="NomeFantasia" class="control-label"></label>
                            <input asp-for="NomeFantasia" class="form-control" />
                            <span asp-validation-for="NomeFantasia" class="text-danger"></span>
                        </div>
                        @*</div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="CPF_CNPJ" class="control-label"></label>
                            <input asp-for="CPF_CNPJ" class="form-control cpfCnpj" id="CPF" />
                            <span asp-validation-for="CPF_CNPJ" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group" title="PessoaFisica">
                            <label asp-for="RG" class="control-label"></label>
                            <input asp-for="RG" class="form-control" />
                            <span asp-validation-for="RG" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group" title="PessoaFisica">
                            <label asp-for="RG_Emiss" class="control-label"></label>
                            <input asp-for="RG_Emiss" class="form-control" />
                            <span asp-validation-for="RG_Emiss" class="text-danger"></span>
                        </div>
                        @*</div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">*@
                        <div class="form-group" title="PessoaFisica">
                            <label asp-for="Naturalidade" class="control-label"></label>
                            <input asp-for="Naturalidade" class="form-control" />
                            <span asp-validation-for="Naturalidade" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group" title="PessoaFisica">
                            <label asp-for="Nacionalidade" class="control-label"></label>
                            <input asp-for="Nacionalidade" class="form-control" />
                            <span asp-validation-for="Nacionalidade" class="text-danger"></span>
                        </div>
                        @*</div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">*@
                        <div class="form-group" title="PessoaFisica">
                            <label asp-for="EstadoCivil" class="control-label"></label>
                            <select asp-for="EstadoCivil" asp-items="Html.GetEnumSelectList<TipoEstadoCivil>()" class="form-control"></select>
                            <span asp-validation-for="EstadoCivil" class="text-danger" />
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group" title="PessoaFisica">
                            <label asp-for="Sexo" class="control-label"></label>
                            <select asp-for="Sexo" asp-items="Html.GetEnumSelectList<TipoSexo>()" class="form-control"></select>
                            <span asp-validation-for="Sexo" class="text-danger"></span>
                        </div>
                        @*</div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Data_Alt" class="control-label"></label>
                            <input asp-for="Data_Alt" class="form-control" />
                            <span asp-validation-for="Data_Alt" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Data_Cad" class="control-label"></label>
                            <input asp-for="Data_Cad" class="form-control" />
                            <span asp-validation-for="Data_Cad" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Data_Nasc" class="control-label"></label>
                            <input asp-for="Data_Nasc" class="form-control" />
                            <span asp-validation-for="Data_Nasc" class="text-danger"></span>
                        </div>
                        @*</div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="EMail" class="control-label"></label>
                            <input asp-for="EMail" class="form-control" type="email" />
                            <span asp-validation-for="EMail" class="text-danger"></span>
                        </div>
                        @*</div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Tel" class="control-label"></label>
                            <input asp-for="Tel" class="form-control tel-mask" />
                            <span asp-validation-for="Tel" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Tel_Cel" class="control-label"></label>
                            <input asp-for="Tel_Cel" class="form-control telcel-mask" />
                            <span asp-validation-for="Tel_Cel" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Tel_Cel_Mess" class="control-label"></label>
                            <select asp-for="Tel_Cel_Mess" asp-items="Html.GetEnumSelectList<TipoAppMensagem>()" class="form-control"></select>
                            <span asp-validation-for="Tel_Cel_Mess" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Tel_Comer" class="control-label"></label>
                            <input asp-for="Tel_Comer" class="form-control tel-mask" />
                            <span asp-validation-for="Tel_Comer" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Tel_Comer_Mess" class="control-label"></label>
                            <select asp-for="Tel_Comer_Mess" asp-items="Html.GetEnumSelectList<TipoAppMensagem>()" class="form-control"></select>
                            <span asp-validation-for="Tel_Comer_Mess" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Tel_Comer_Ramal" class="control-label"></label>
                            <input asp-for="Tel_Comer_Ramal" class="form-control" />
                            <span asp-validation-for="Tel_Comer_Ramal" class="text-danger"></span>
                        </div>
                        @*</div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="CEP" class="control-label"></label>
                            <input asp-for="CEP" class="form-control cep-mask" />
                            <span asp-validation-for="CEP" class="text-danger"></span>
                        </div>
                        @*</div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Logradouro_Tpo" class="control-label"></label>
                            <input asp-for="Logradouro_Tpo" class="form-control" />
                            <span asp-validation-for="Logradouro_Tpo" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Logradouro" class="control-label"></label>
                            <input asp-for="Logradouro" class="form-control" />
                            <span asp-validation-for="Logradouro" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Numero" class="control-label"></label>
                            <input asp-for="Numero" class="form-control" />
                            <span asp-validation-for="Numero" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Complemento" class="control-label"></label>
                            <input asp-for="Complemento" class="form-control" />
                            <span asp-validation-for="Complemento" class="text-danger"></span>
                        </div>
                        @*</div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Bairro" class="control-label"></label>
                            <input asp-for="Bairro" class="form-control" />
                            <span asp-validation-for="Bairro" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="Localidade" class="control-label"></label>
                            <input asp-for="Localidade" class="form-control" />
                            <span asp-validation-for="Localidade" class="text-danger"></span>
                        </div>
                        @*</div>
                            <div class="col-md-4">*@
                        <div class="form-group">
                            <label asp-for="UF_SGL" class="control-label"></label>
                            <input asp-for="UF_SGL" class="form-control" />
                            <span asp-validation-for="UF_SGL" class="text-danger"></span>
                        </div>
                        @*</div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">*@
                    </div>
                    <div class="form-group">
                        <span class="control-label">Foto de Rosto</span>
                        <input type="file" id="files" name="files[]" class="control-label" asp-for="FotoRosto"/>
                        @*<input asp-for="FotoRosto" id="FotoRosto"/>*@
                        @*<input type="file" id="files" name="files[]" multiple />*@
                    </div>
                    <div class="col-md-4">
                        <picture>
                            <output id="list" class="control-label"></output>
                        </picture>
                    </div>
                </div>
            </form>
        </div>
        <div role="tabpanel" class="tab-pane" id="profile">Aba 2</div>
        <div role="tabpanel" class="tab-pane" id="messages">Aba 3</div>
        <div role="tabpanel" class="tab-pane" id="settings">Aba 4</div>
        <div class="form-group">
            <form asp-action="Edit">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <input type="submit" value="Save" class="btn btn-default" />

            </form>
        </div>

    </div>
    <div>
        <a asp-action="Index">Back to List</a>
    </div>
</div>


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <script src="~/js/UploadArquivos.js"></script>

    <script src="~/js/funcoesGenericas.js"></script>

    <script>
        function uploadFotoRosto(evt) {

            //var files = evt.target.files;
            var filesX = evt.target.files[0];
            var reader = new FileReader();
            reader.readAsDataURL(filesX);

            if (document.getElementById('a250574') != null)
            {
                document.getElementById('a250574').remove()
            }

            handleFileSelect_OnePhoto(evt);
        }

        document.getElementById('files').addEventListener('change', uploadFotoRosto, false);
        //document.getElementById('files').addEventListener('change', handleFileSelect_OnePhoto, false);

    </script>

    @*<script>

        //Várias Fotos
        function handleFileSelect(evt) {
            var files = evt.target.files; // FileList object

            // Loop through the FileList and render image files as thumbnails.
            for (var i = 0, f; f = files[i]; i++) {

                // Only process image files.
                if (!f.type.match('image.*')) {
                    continue;
                }

                var reader = new FileReader();

                // Closure to capture the file information.
                reader.onload = (function (theFile) {
                    return function (e) {
                        // Render thumbnail.

                        //document.getElementById('fotorosto').src = ''
                        alert(e.target.result)
                        alert(escape(theFile.name))
                        
                        //modificado
                        var span = document.createElement('span');
                        span.innerHTML = ['<img alt = "Package Management" class="img-responsive"  src="', e.target.result,
                            '" title="', escape(theFile.name), '"/>'].join('');
                        document.getElementById('list').insertBefore(span, null);

                        //original
                        //var span = document.createElement('span');
                        //span.innerHTML = ['<img class="thumb" src="', e.target.result,
                        //    '" title="', escape(theFile.name), '"/>'].join('');
                        //document.getElementById('list').insertBefore(span, null);
                    };
                })(f);

                // Read in the image file as a data URL.
                reader.readAsDataURL(f);
            }
        }

        document.getElementById('files').addEventListener('change', handleFileSelect, false);
    </script>*@

    <script>
        $("#Tpo_Pessoa").change(function () {
            TipoPessoaAcoes();
        })
        $(document).ready(function () {
            TipoPessoaAcoes();
        })
        function TipoPessoaAcoes() {
            var $vTpo_Pessoa = $("#Tpo_Pessoa").val();
            var $vcpfcnpj = $("#CPF");

            //alert($vTpo_Pessoa.toString());

            if ($vTpo_Pessoa == 2) {
                $vcpfcnpj.unmask('000.000.000-00');
                $vcpfcnpj.mask('99.999.999/9999-99');
                ocultarDivsTitulo("PessoaFisica", "PessoaJuridica");
            }
            else {
                $vcpfcnpj.unmask('00.000.000/0000-00');
                $vcpfcnpj.mask('999.999.999-99');
                ocultarDivsTitulo("PessoaJuridica", "PessoaFisica");
            }
        }
    </script>

    <script>
        $(document).ready(function () {
            var $seuCampoCpf = $("#CPF");

            if ($seuCampoCpf.val().length > 11) {
                $seuCampoCpf.unmask('000.000.000-000000');
                $seuCampoCpf.mask('99.999.999/9999-99')
            } else {
                $seuCampoCpf.unmask('00.000.000/0000-00');
                $seuCampoCpf.mask('999.999.999-9999999');
            }
        });
    </script>

}
